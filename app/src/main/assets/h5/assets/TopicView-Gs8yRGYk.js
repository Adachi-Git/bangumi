import{c as i,C as B,B as S,a as T,W as k}from"./BottomSpinnerView-elldpNRz.js";import{R as x}from"./RelativeItemView-Fg7wDgF1.js";import{d as D,r as o,a as N,o as R,c as u,b as n,t as c,e as a,u as v,g as b,w as _,n as f,h as w}from"./index-4BXTZWGW.js";const H={class:"topic",id:"topic"},I={class:"topic-title"},J={class:"topic-info"},L={class:"topic-author"},M={class:"topic-time"},P=["innerHTML"],z={key:0,class:"divider"},g=10,q=D({__name:"TopicView",setup(E){const t=o({}),l=o(),h=o(new Date().getDate()),m=o(1),C=o(!1),d=N([]),r=o("哼！Bangumi老娘我是有底线的人"),y={loadTopicDetail:async e=>{t.value=e,await f(),i.optContentJs(l.value)}},V=async e=>{const p=window.android.onLoadComments(m.value,g,C.value),s=JSON.parse(p);s.length==0?e.complete():(await i.delay(200),d.push(...s),m.value++,await f(),s.length<g?e.complete():e.loaded())};return R(()=>{window.robotSay=e=>{r.value=e},window.topic=y,window.mounted=!0}),(e,p)=>(w(),u("div",H,[n("div",I,c(t.value.title),1),n("div",J,[n("div",L,c(t.value.userName),1),n("div",M,c(t.value.time),1)]),a(x,{related:t.value.related},null,8,["related"]),n("div",{class:"topic-content",ref_key:"topicContentRef",ref:l,innerHTML:v(i).optText(t.value.content)},null,8,P),t.value.content?(w(),u("div",z)):b("",!0),a(B,{target:"#topic",comments:d},null,8,["comments"]),a(v(k),{class:"loading",target:"#topic",identifier:h.value,onInfinite:V},{spinner:_(()=>[a(S)]),complete:_(()=>[a(T,{message:r.value},null,8,["message"])]),_:1},8,["identifier"])]))}});export{q as default};
