import{R as V}from"./RelativeItemView-Fr6rhUYq.js";import{c as d,C as k,B as S,a as N,W as x}from"./BottomSpinnerView-0U7qdJrW.js";import{d as D,r as o,a as R,o as J,c as a,b as n,t as c,e as l,u as f,F as L,f as T,g as r,w as p,n as b,h as i}from"./index-L1LMH3J0.js";const H={key:0,class:"blog",id:"blog"},I={class:"blog-title"},M={class:"blog-info"},F={class:"blog-author"},O={class:"blog-time"},P=["innerHTML"],z={key:0,class:"blog-tag"},E=n("div",{class:"tip"},"标签：",-1),W={class:"blog-tag-item"},q={key:1,class:"divider"},w=10,U=D({__name:"BlogView",setup(A){const e=o({}),m=o(),h=o(new Date().getDate()),g=o(1),C=o(!1),u=R([]),v=o("哼！Bangumi老娘我是有底线的人"),y={loadBlogDetail:async t=>{e.value=t,console.log("blog: "+JSON.stringify(t,null,3)),await b(),d.optContentJs(m.value)}},B=async t=>{const _=window.android.onLoadComments(g.value,w,C.value),s=JSON.parse(_);s.length==0?t.complete():(await d.delay(200),u.push(...s),g.value++,await b(),s.length<w?t.complete():t.loaded())};return J(()=>{window.robotSay=t=>{v.value=t},window.blog=y,window.mounted=!0}),(t,_)=>e.value.id?(i(),a("div",H,[n("div",I,c(e.value.title),1),n("div",M,[n("div",F,c(e.value.userName),1),n("div",O,c(e.value.time),1)]),l(V,{related:e.value.related},null,8,["related"]),n("div",{class:"blog-content",ref_key:"blogContentRef",ref:m,innerHTML:f(d).optText(e.value.content)},null,8,P),(e.value.tags||[]).length>0?(i(),a("div",z,[E,(i(!0),a(L,null,T(e.value.tags||[],s=>(i(),a("div",W,c(s.title),1))),256))])):r("",!0),e.value.content?(i(),a("div",q)):r("",!0),l(k,{target:"#blog",comments:u},null,8,["comments"]),l(f(x),{class:"loading",target:"#blog",identifier:h.value,onInfinite:B},{spinner:p(()=>[l(S)]),complete:p(()=>[l(N,{message:v.value},null,8,["message"])]),_:1},8,["identifier"])])):r("",!0)}});export{U as default};
