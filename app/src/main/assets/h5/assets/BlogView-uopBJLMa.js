import{c as d,R as V,C as k,B as S,a as x,W as N}from"./BottomSpinnerView-2frrTuH7.js";import{d as R,r as o,a as D,o as L,c as s,b as a,t as r,e as l,u as f,F as T,f as H,g,w as h,n as w,h as i}from"./index-fmpy9jEk.js";const I={key:0,class:"blog",id:"blog"},J={class:"blog-title"},M={class:"blog-info"},F={class:"blog-author"},P={class:"blog-time"},z=["innerHTML"],E={key:0,class:"blog-tag"},O=a("div",{class:"tip"},"标签：",-1),W={class:"blog-tag-item"},j={key:1,class:"divider"},C=10,K=R({__name:"BlogView",setup(q){const e=o({}),v=o(),_=o(new Date().getDate()),m=o(1),u=o("desc"),c=D([]),p=o("哼！Bangumi老娘我是有底线的人"),y={loadBlogDetail:async t=>{e.value=t,await w(),d.optContentJs(v.value)}},B=async t=>{const b=window.android.onLoadComments(m.value,C,u.value),n=JSON.parse(b);n.length==0?t.complete():(await d.delay(200),c.push(...n),m.value++,await w(),n.length<C?t.complete():t.loaded())};return L(()=>{window.robotSay=t=>{p.value=t},d.initComment(null,()=>c,t=>{u.value=t,m.value=1,c.length=0,_.value++}),window.blog=y,window.mounted=!0}),(t,b)=>e.value.id?(i(),s("div",I,[a("div",J,r(e.value.title),1),a("div",M,[a("div",F,r(e.value.userName),1),a("div",P,r(e.value.time),1)]),l(V,{related:e.value.related},null,8,["related"]),a("div",{class:"blog-content",ref_key:"blogContentRef",ref:v,innerHTML:f(d).optText(e.value.content)},null,8,z),(e.value.tags||[]).length>0?(i(),s("div",E,[O,(i(!0),s(T,null,H(e.value.tags||[],n=>(i(),s("div",W,r(n.title),1))),256))])):g("",!0),e.value.content?(i(),s("div",j)):g("",!0),l(k,{target:"#blog",comments:c,sort:u.value},null,8,["comments","sort"]),l(f(N),{class:"loading",target:"#blog",identifier:_.value,distance:300,onInfinite:B},{spinner:h(()=>[l(S)]),complete:h(()=>[l(x,{message:p.value},null,8,["message"])]),_:1},8,["identifier"])])):g("",!0)}});export{K as default};
