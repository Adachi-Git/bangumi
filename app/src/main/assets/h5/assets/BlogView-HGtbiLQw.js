import{R as S}from"./RelativeItemView-Iks4bfId.js";import{c as d,C as V,B as k,a as x,W as N}from"./BottomSpinnerView-KeSBnWOJ.js";import{d as R,r as o,a as D,o as L,c as s,b as n,t as r,e as l,u as b,F as T,f as H,g,w as f,n as h,h as i}from"./index-zcwPGp2L.js";const I={key:0,class:"blog",id:"blog"},J={class:"blog-title"},M={class:"blog-info"},F={class:"blog-author"},P={class:"blog-time"},z=["innerHTML"],E={key:0,class:"blog-tag"},O=n("div",{class:"tip"},"标签：",-1),W={class:"blog-tag-item"},j={key:1,class:"divider"},C=10,Q=R({__name:"BlogView",setup(q){const e=o({}),v=o(),_=o(new Date().getDate()),m=o(1),u=o("desc"),c=D([]),p=o("哼！Bangumi老娘我是有底线的人"),y={loadBlogDetail:async t=>{e.value=t,await h(),d.optContentJs(v.value)}},B=async t=>{const w=window.android.onLoadComments(m.value,C,u.value),a=JSON.parse(w);a.length==0?t.complete():(await d.delay(200),c.push(...a),m.value++,await h(),a.length<C?t.complete():t.loaded())};return L(()=>{window.robotSay=t=>{p.value=t},window.changeCommentSort=t=>{u.value=t,m.value=1,c.length=0,_.value++},d.initComment(()=>c),window.blog=y,window.mounted=!0}),(t,w)=>e.value.id?(i(),s("div",I,[n("div",J,r(e.value.title),1),n("div",M,[n("div",F,r(e.value.userName),1),n("div",P,r(e.value.time),1)]),l(S,{related:e.value.related},null,8,["related"]),n("div",{class:"blog-content",ref_key:"blogContentRef",ref:v,innerHTML:b(d).optText(e.value.content)},null,8,z),(e.value.tags||[]).length>0?(i(),s("div",E,[O,(i(!0),s(T,null,H(e.value.tags||[],a=>(i(),s("div",W,r(a.title),1))),256))])):g("",!0),e.value.content?(i(),s("div",j)):g("",!0),l(V,{target:"#blog",comments:c,sort:u.value},null,8,["comments","sort"]),l(b(N),{class:"loading",target:"#blog",identifier:_.value,distance:300,onInfinite:B},{spinner:f(()=>[l(k)]),complete:f(()=>[l(x,{message:p.value},null,8,["message"])]),_:1},8,["identifier"])])):g("",!0)}});export{Q as default};
