import{c as i,C as k,B as S,a as T,W as x}from"./BottomSpinnerView-0U7qdJrW.js";import{R as D}from"./RelativeItemView-Fr6rhUYq.js";import{d as N,r as o,a as R,o as b,c as u,b as n,t as c,e as a,u as v,g as _,w as f,n as w,h as g}from"./index-L1LMH3J0.js";const H={key:0,class:"topic",id:"topic"},I={class:"topic-title"},J={class:"topic-info"},L={class:"topic-author"},M={class:"topic-time"},P=["innerHTML"],z={key:0,class:"divider"},h=10,q=N({__name:"TopicView",setup(E){const e=o({}),l=o(),C=o(new Date().getDate()),d=o(1),y=o(!1),m=R([]),r=o("哼！Bangumi老娘我是有底线的人"),V={loadTopicDetail:async t=>{e.value=t,await w(),i.optContentJs(l.value)}},B=async t=>{const p=window.android.onLoadComments(d.value,h,y.value),s=JSON.parse(p);s.length==0?t.complete():(await i.delay(200),m.push(...s),d.value++,await w(),s.length<h?t.complete():t.loaded())};return b(()=>{window.robotSay=t=>{r.value=t},window.topic=V,window.mounted=!0}),(t,p)=>e.value.id?(g(),u("div",H,[n("div",I,c(e.value.title),1),n("div",J,[n("div",L,c(e.value.userName),1),n("div",M,c(e.value.time),1)]),a(D,{related:e.value.related},null,8,["related"]),n("div",{class:"topic-content",ref_key:"topicContentRef",ref:l,innerHTML:v(i).optText(e.value.content)},null,8,P),e.value.content?(g(),u("div",z)):_("",!0),a(k,{target:"#topic",comments:m},null,8,["comments"]),a(v(x),{class:"loading",target:"#topic",identifier:C.value,onInfinite:B},{spinner:f(()=>[a(S)]),complete:f(()=>[a(T,{message:r.value},null,8,["message"])]),_:1},8,["identifier"])])):_("",!0)}});export{q as default};
