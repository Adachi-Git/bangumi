import{R as S}from"./RelativeItemView-nMkPZsP4.js";import{C as V,c as g,B as k,a as N,W as x}from"./BottomSpinnerView-w0dX172D.js";import{d as R,r as o,a as D,o as J,c as s,b as n,t as c,e as l,u as w,F as L,f as T,g as u,w as b,n as h,h as i}from"./index-x_J9GbU6.js";const H={key:0,class:"blog",id:"blog"},I={class:"blog-title"},M={class:"blog-info"},F={class:"blog-author"},O={class:"blog-time"},P=["innerHTML"],z={key:0,class:"blog-tag"},E=n("div",{class:"tip"},"标签：",-1),W={class:"blog-tag-item"},q={key:1,class:"divider"},C=10,U=R({__name:"BlogView",setup(A){const t=o({}),v=o(),_=o(new Date().getDate()),r=o(1),d=o("desc"),m=D([]),p=o("哼！Bangumi老娘我是有底线的人"),y={loadBlogDetail:async e=>{t.value=e,console.log("blog: "+JSON.stringify(e,null,3)),await h(),g.optContentJs(v.value)}},B=async e=>{const f=window.android.onLoadComments(r.value,C,d.value),a=JSON.parse(f);a.length==0?e.complete():(await g.delay(200),m.push(...a),r.value++,await h(),a.length<C?e.complete():e.loaded())};return J(()=>{window.robotSay=e=>{p.value=e},window.changeCommentSort=e=>{d.value=e,r.value=1,m.length=0,_.value++},window.blog=y,window.mounted=!0}),(e,f)=>t.value.id?(i(),s("div",H,[n("div",I,c(t.value.title),1),n("div",M,[n("div",F,c(t.value.userName),1),n("div",O,c(t.value.time),1)]),l(S,{related:t.value.related},null,8,["related"]),n("div",{class:"blog-content",ref_key:"blogContentRef",ref:v,innerHTML:w(g).optText(t.value.content)},null,8,P),(t.value.tags||[]).length>0?(i(),s("div",z,[E,(i(!0),s(L,null,T(t.value.tags||[],a=>(i(),s("div",W,c(a.title),1))),256))])):u("",!0),t.value.content?(i(),s("div",q)):u("",!0),l(V,{target:"#blog",comments:m,sort:d.value},null,8,["comments","sort"]),l(w(x),{class:"loading",target:"#blog",identifier:_.value,distance:300,onInfinite:B},{spinner:b(()=>[l(k)]),complete:b(()=>[l(N,{message:p.value},null,8,["message"])]),_:1},8,["identifier"])])):u("",!0)}});export{U as default};
