import{d as C,r as k,o as N,c as r,a as o,t as i,g as u,v as p,h as m,w as v,F as B,b as V,e as A,f as c,p as x,i as y,j as E,_ as R}from"./index-3vTmfSdM.js";const n=d=>(x("data-v-a6481913"),d=d(),y(),d),S={key:0,class:"blog-post"},P={class:"blog-post-title"},U={class:"blog-post-info"},z={class:"blog-post-author"},J={class:"blog-post-time"},I={class:"blog-post-form"},M=n(()=>o("div",{class:"title"},"标题",-1)),O=n(()=>o("div",{class:"title"},[E("正文内容"),o("span",{class:"sub-tip"},"支持BBCode")],-1)),$=n(()=>o("div",{class:"title"},"标签",-1)),j=n(()=>o("div",{class:"title"},"隐私设置",-1)),D={class:"blog-post-ratio"},F=n(()=>o("div",{class:"title"},"关联",-1)),H={key:0,class:"blog-post-relative"},L={class:"blog-post-relative-subject"},Q={class:"tip"},T=["onClick"],G=["src"],K={class:"title"},q=C({__name:"BlogPostView",setup(d){const s=k({}),h={setPostInfo:t=>{t.related=w(t.related),t.filled=!0,t.userName.length===0&&(t.userName="未登录"),s.value=t},addRelated:t=>{if(t.id==null||t.id.length===0)return;const e=s.value,l=e.related||[];for(let a=0;a<l.length;a++)if(t.id==l[a].id)return;l.push(t),e.related=l,s.value=e},getPostInfo:()=>JSON.stringify(s.value)},g=t=>{const e=s.value;e.isPublic=t,s.value=e},f=t=>{const e=t.target;e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/9+p2gAAAABJRU5ErkJggg=="},b=t=>{window.android&&window.android.onClickRelated(JSON.stringify(t),t.empty)},_=t=>{let e=0;return t.forEach(l=>{(l.id||"").length>0&&e++}),e},w=t=>(_(t)==0&&t.push({titleNative:"添加关联",cover:"",empty:!0}),t);return N(()=>{window.blogPost=h,window.mounted=!0}),(t,e)=>s.value.filled===!0?(c(),r("div",S,[o("div",P,i(s.value.pageName||"发表内容"),1),o("div",U,[o("div",z,i(s.value.userName),1),o("div",J,i(s.value.time),1)]),o("div",I,[M,u(o("input",{name:"title",type:"text",class:"input",placeholder:"请输入标题","onUpdate:modelValue":e[0]||(e[0]=l=>s.value.title=l)},null,512),[[p,s.value.title]]),O,u(o("textarea",{name:"content",class:"textarea",rows:"8",placeholder:"请输入内容","onUpdate:modelValue":e[1]||(e[1]=l=>s.value.content=l)},null,512),[[p,s.value.content]]),$,u(o("input",{name:"tags",type:"text",class:"input",placeholder:"请输入标签，多个空格分割","onUpdate:modelValue":e[2]||(e[2]=l=>s.value.tags=l)},null,512),[[p,s.value.tags]]),j,o("div",D,[o("div",{class:m(["ratio",{selected:s.value.isPublic}]),onClick:e[3]||(e[3]=v(l=>g(!0),["stop"]))},"公开",2),o("div",{class:m(["ratio",{selected:!s.value.isPublic}]),onClick:e[4]||(e[4]=v(l=>g(!1),["stop"]))},"仅好友可见",2)]),F]),(s.value.related||[]).length>0?(c(),r("div",H,[o("div",L,[o("div",Q,"关联的条目 "+i(_(s.value.related))+" 个",1),(c(!0),r(B,null,V(s.value.related,l=>(c(),r("div",{class:"relative",onClick:v(a=>b(l),["stop"])},[o("img",{src:l.cover,alt:"img",onError:e[5]||(e[5]=a=>f(a))},null,40,G),o("div",K,"# "+i(l.titleNative),1)],8,T))),256))])])):A("",!0)])):A("",!0)}}),X=R(q,[["__scopeId","data-v-a6481913"]]);export{X as default};
