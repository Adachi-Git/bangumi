import{d as E,r as J,o as U,c as o,a as t,t as d,F as w,b as y,e as h,w as _,n as j,f as n}from"./index-3vTmfSdM.js";import{c as f}from"./common-8KoIMbCC.js";const A={class:"blog",id:"blog"},D={class:"blog-title"},F={class:"blog-info"},O={class:"blog-author"},Q={class:"blog-time"},q={key:0,class:"blog-relative"},z={class:"blog-relative-subject"},G={class:"tip"},K=["onClick"],P=["src"],W={class:"title"},X=["innerHTML"],Y={key:1,class:"blog-tag"},Z=t("div",{class:"tip"},"标签：",-1),tt={class:"blog-tag-item"},et={key:2,class:"divider"},st={key:3,class:"blog-comment"},ot={class:"blog-comment-title"},nt=t("div",{class:"title"},"精选留言",-1),lt=t("div",{style:{flex:"1"}},null,-1),it={class:"blog-comment-item"},ct=["src","onClick"],at={class:"comment-content"},dt={class:"info"},rt=["onClick"],_t={class:"time"},vt=["innerHTML","onClick"],ut=t("div",{style:{height:"12px"}},null,-1),gt={class:"blog-comment-item"},ht=["src","onClick"],pt={class:"comment-content"},kt={class:"info"},wt=["onClick"],yt={class:"time"},ft=["innerHTML","onClick"],bt={key:4,class:"blog-space"},Rt=E({__name:"BlogView",setup(Ct){const s=J(),C=J(),x={loadBlogDetail:async l=>{s.value=l,await j();const r=C.value;f.injectImageClick(r)}},I=l=>{const r=(l||"").trim(),i="　　",a=i+r.replace(/&nbsp;/g," ").trim().replace(/(\r\n|\n|\r)\s+/g,"$1").replace(/(\r\n|\n|\r)/g,`$1${i}`);return console.log(a),a},m=(l,r,i)=>{f.scrollIntoView(l,document.getElementById("blog"),i==null);const a=(i==null?void 0:i.replyJs)||"",k=r.replyJs||"",u=a.length>0,g=u?a:k,v=i||r;if(window.android){if(g.length>0){u&&(v.replyQuote=f.handleQuote(v.userName,v.replyContent)),window.android.onReplyUser(a.length>0?a:g,JSON.stringify(v));return}window.android.onNeedLogin()}},S=l=>{f.scrollIntoView(l,document.getElementById("blog"),!0),window.android&&window.android.onReplyNew()},V=l=>{window.android&&window.android.onClickRelated(JSON.stringify(l))},p=l=>{window.android&&window.android.onClickUser(l.userId)};return U(()=>{window.blog=x,window.mounted=!0}),(l,r)=>{var i,a,k,u,g,v,N,R,M,L,T,$,B,H;return n(),o("div",A,[t("div",D,d((i=s.value)==null?void 0:i.title),1),t("div",F,[t("div",O,d((a=s.value)==null?void 0:a.userName),1),t("div",Q,d((k=s.value)==null?void 0:k.time),1)]),(((u=s.value)==null?void 0:u.related)||[]).length>0?(n(),o("div",q,[t("div",z,[t("div",G,"关联的条目 "+d((v=(g=s.value)==null?void 0:g.related)==null?void 0:v.length)+" 个",1),(n(!0),o(w,null,y(((N=s.value)==null?void 0:N.related)||[],e=>(n(),o("div",{class:"relative",onClick:_(c=>V(e),["stop"])},[t("img",{src:e.cover,alt:"img"},null,8,P),t("div",W,"# "+d(e.titleNative),1)],8,K))),256))])])):h("",!0),t("div",{class:"blog-content",ref_key:"blogContentRef",ref:C,innerHTML:I((R=s.value)==null?void 0:R.content)},null,8,X),(((M=s.value)==null?void 0:M.tags)||[]).length>0?(n(),o("div",Y,[Z,(n(!0),o(w,null,y(((L=s.value)==null?void 0:L.tags)||[],e=>(n(),o("div",tt,d(e.title),1))),256))])):h("",!0),(T=s.value)!=null&&T.content?(n(),o("hr",et)):h("",!0),($=s.value)!=null&&$.content?(n(),o("div",st,[t("div",ot,[nt,lt,t("div",{class:"write",onClick:r[0]||(r[0]=_(e=>S(e),["stop"]))},"写留言")]),(n(!0),o(w,null,y(((B=s.value)==null?void 0:B.comments)||[],e=>(n(),o("div",it,[t("img",{class:"avatar",src:e.userAvatar,alt:"img",onClick:_(c=>p(e),["stop"])},null,8,ct),t("div",at,[t("div",dt,[t("div",{class:"user-name",onClick:_(c=>p(e),["stop"])},d(e.userName),9,rt),t("div",_t,d(e.time),1)]),t("div",{class:"blog-html",innerHTML:e.replyContent,onClick:_(c=>m(c,e,null),["stop"])},null,8,vt),ut,(n(!0),o(w,null,y(e.topicSubReply||[],c=>(n(),o("div",gt,[t("img",{class:"avatar sub",src:c.userAvatar,alt:"img",onClick:_(b=>p(c),["stop"])},null,8,ht),t("div",pt,[t("div",kt,[t("div",{class:"user-name",onClick:_(b=>p(c),["stop"])},d(c.userName),9,wt),t("div",yt,d(c.time),1)]),t("div",{class:"blog-html",innerHTML:c.replyContent,onClick:_(b=>m(b,e,c),["stop"])},null,8,ft)])]))),256))])]))),256))])):h("",!0),(H=s.value)!=null&&H.content?(n(),o("div",bt," 我是有底线的 ")):h("",!0)])}}});export{Rt as default};
