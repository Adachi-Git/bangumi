import{d as V,r as a,a as x,o as I,c as l,b as s,t as m,w as N,e as i,u as b,F as R,f as D,g as _,h,n as C,i as d}from"./index-8aWKy8mL.js";import{c as u,R as L,C as M,B as T,a as H,W as J}from"./BottomSpinnerView-BVE0U3Ry.js";const U={key:0,class:"blog",id:"blog"},F={class:"blog-title"},P=["onClick"],z={class:"blog-author"},E={class:"blog-time"},O=["innerHTML"],W={key:0,class:"blog-tag"},j=s("div",{class:"tip"},"标签：",-1),q={class:"blog-tag-item"},A={key:1,class:"divider"},k=10,X=V({__name:"BlogView",setup(G){const t=a({}),w=a(),p=a(new Date().getDate()),g=a(1),c=a("default"),r=x([]),f=a("哼！Bangumi老娘我是有底线的人"),y={loadBlogDetail:async e=>{t.value=e,await C(),u.optContentJs(w.value)}},B=async e=>{const o=window.android.onCommentSort(c.value),n=window.android.onLoadComments(g.value,k,o),v=JSON.parse(n);c.value=o,v.length==0?e.complete():(await u.delay(200),r.push(...v),g.value++,await C(),v.length<k?e.complete():e.loaded())},S=()=>{var o,n;const e=((o=t.value)==null?void 0:o.userId)||"";window.android&&e&&window.android&&window.android.onClickUser(e,(n=t.value)==null?void 0:n.id)};return I(()=>{window.robotSay=e=>{f.value=e},u.initComment(null,()=>r,e=>{c.value=e,g.value=1,r.length=0,p.value++}),window.blog=y,window.mounted=!0}),(e,o)=>t.value.id?(d(),l("div",U,[s("div",F,m(t.value.title),1),s("div",{class:"blog-info",onClick:N(S,["stop"])},[s("div",z,m(t.value.userName),1),s("div",E,m(t.value.time),1)],8,P),i(L,{related:t.value.related},null,8,["related"]),s("div",{class:"blog-content",ref_key:"blogContentRef",ref:w,innerHTML:b(u).optText(t.value.content)},null,8,O),(t.value.tags||[]).length>0?(d(),l("div",W,[j,(d(!0),l(R,null,D(t.value.tags||[],n=>(d(),l("div",q,m(n.title),1))),256))])):_("",!0),t.value.content?(d(),l("div",A)):_("",!0),i(M,{target:"#blog",comments:r,sort:c.value},null,8,["comments","sort"]),i(b(J),{class:"loading",target:"#blog",identifier:p.value,distance:300,onInfinite:B},{spinner:h(()=>[i(T)]),complete:h(()=>[i(H,{message:f.value},null,8,["message"])]),_:1},8,["identifier"])])):_("",!0)}});export{X as default};
