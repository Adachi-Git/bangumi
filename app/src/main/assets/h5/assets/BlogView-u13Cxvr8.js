import{R as V}from"./RelativeItemView-Fg7wDgF1.js";import{c as d,C as S,B as k,a as N,W as x}from"./BottomSpinnerView-elldpNRz.js";import{d as D,r as o,a as R,o as J,c as a,b as n,t as c,e as l,u as v,F as L,f as T,g as f,w as p,n as b,h as i}from"./index-4BXTZWGW.js";const H={class:"blog",id:"blog"},I={class:"blog-title"},M={class:"blog-info"},F={class:"blog-author"},O={class:"blog-time"},P=["innerHTML"],z={key:0,class:"blog-tag"},E=n("div",{class:"tip"},"标签：",-1),W={class:"blog-tag-item"},q={key:1,class:"divider"},w=10,U=D({__name:"BlogView",setup(A){const e=o({}),r=o(),h=o(new Date().getDate()),m=o(1),C=o(!1),g=R([]),u=o("哼！Bangumi老娘我是有底线的人"),y={loadBlogDetail:async t=>{e.value=t,console.log("blog: "+JSON.stringify(t,null,3)),await b(),d.optContentJs(r.value)}},B=async t=>{const _=window.android.onLoadComments(m.value,w,C.value),s=JSON.parse(_);s.length==0?t.complete():(await d.delay(200),g.push(...s),m.value++,await b(),s.length<w?t.complete():t.loaded())};return J(()=>{window.robotSay=t=>{u.value=t},window.blog=y,window.mounted=!0}),(t,_)=>(i(),a("div",H,[n("div",I,c(e.value.title),1),n("div",M,[n("div",F,c(e.value.userName),1),n("div",O,c(e.value.time),1)]),l(V,{related:e.value.related},null,8,["related"]),n("div",{class:"blog-content",ref_key:"blogContentRef",ref:r,innerHTML:v(d).optText(e.value.content)},null,8,P),(e.value.tags||[]).length>0?(i(),a("div",z,[E,(i(!0),a(L,null,T(e.value.tags||[],s=>(i(),a("div",W,c(s.title),1))),256))])):f("",!0),e.value.content?(i(),a("div",q)):f("",!0),l(S,{target:"#blog",comments:g},null,8,["comments"]),l(v(x),{class:"loading",target:"#blog",identifier:h.value,onInfinite:B},{spinner:p(()=>[l(k)]),complete:p(()=>[l(N,{message:u.value},null,8,["message"])]),_:1},8,["identifier"])]))}});export{U as default};
