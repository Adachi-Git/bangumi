import{d as V,r as n,a as S,o as x,c as l,b as a,t as r,w as I,e as i,u as b,F as N,f as R,g as v,h as f,n as h,i as c}from"./index-TyhFPmEw.js";import{c as m,R as D,C as L,B as M,a as T,W as H}from"./BottomSpinnerView-wKRd37Ag.js";const J={key:0,class:"blog",id:"blog"},U={class:"blog-title"},F=["onClick"],P={class:"blog-author"},z={class:"blog-time"},E=["innerHTML"],O={key:0,class:"blog-tag"},W=a("div",{class:"tip"},"标签：",-1),j={class:"blog-tag-item"},q={key:1,class:"divider"},C=10,Q=V({__name:"BlogView",setup(A){const t=n({}),_=n(),w=n(new Date().getDate()),u=n(1),g=n("desc"),d=S([]),p=n("哼！Bangumi老娘我是有底线的人"),k={loadBlogDetail:async e=>{t.value=e,await h(),m.optContentJs(_.value)}},y=async e=>{const s=window.android.onLoadComments(u.value,C,g.value),o=JSON.parse(s);o.length==0?e.complete():(await m.delay(200),d.push(...o),u.value++,await h(),o.length<C?e.complete():e.loaded())},B=()=>{var s,o;const e=((s=t.value)==null?void 0:s.userId)||"";window.android&&e&&window.android&&window.android.onClickUser(e,(o=t.value)==null?void 0:o.id)};return x(()=>{window.robotSay=e=>{p.value=e},m.initComment(null,()=>d,e=>{g.value=e,u.value=1,d.length=0,w.value++}),window.blog=k,window.mounted=!0}),(e,s)=>t.value.id?(c(),l("div",J,[a("div",U,r(t.value.title),1),a("div",{class:"blog-info",onClick:I(B,["stop"])},[a("div",P,r(t.value.userName),1),a("div",z,r(t.value.time),1)],8,F),i(D,{related:t.value.related},null,8,["related"]),a("div",{class:"blog-content",ref_key:"blogContentRef",ref:_,innerHTML:b(m).optText(t.value.content)},null,8,E),(t.value.tags||[]).length>0?(c(),l("div",O,[W,(c(!0),l(N,null,R(t.value.tags||[],o=>(c(),l("div",j,r(o.title),1))),256))])):v("",!0),t.value.content?(c(),l("div",q)):v("",!0),i(L,{target:"#blog",comments:d,sort:g.value},null,8,["comments","sort"]),i(b(H),{class:"loading",target:"#blog",identifier:w.value,distance:300,onInfinite:y},{spinner:f(()=>[i(M)]),complete:f(()=>[i(T,{message:p.value},null,8,["message"])]),_:1},8,["identifier"])])):v("",!0)}});export{Q as default};
